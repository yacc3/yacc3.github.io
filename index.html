

<!DOCTYPE html  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
  <head>
    <meta charset="utf-8">
    <title>yacc3 Blog</title>
    
    <meta name="author" content="yacc3">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/css/syntax.css" rel="stylesheet" type="text/css" media="all">
    <link href="/css/bootstrap.2.2.2.min.css" rel="stylesheet" type="text/css" media="all">
    <link href="/css/style.css" rel="stylesheet" type="text/css" media="all">
    
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="/js/jquery.tocLight.js"></script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {inlineMath: [ ['$[',']$'] ]}
    });
  </script>
    <link href="" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">yacc3</a>
          <ul class="nav">
            <li><a href="/explore.html">Explore</a></li>
            <li><a href="/categories.html">Category</a></li>
            <li><a href="/tags.html">Tag</a></li>
            <li><a href="/archive.html">Archive</a></li>
            <li><a href="/about.html">About</a></li>

<!--             <li><a href="https://github.com/yaccai">Github</a></li> -->
          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="content">
        <div class="row-fluid">
  
        
        <h11><a class="title" href="/posts/iPhone%E6%8D%A2%E7%94%B5%E6%B1%A0.md">iPhone换电池.md</a></h11>
        <div class="post_at_index">
            <p>iPhone 6S维修电池 到2018年12月31号之前是￥216，过后涨到300，不过在京东上买山寨电池（附带工具自己换）100左右。
 
        <a href="/posts/iPhone%E6%8D%A2%E7%94%B5%E6%B1%A0.md" rel="nofollow">阅读全文...</a>
        </div>
        <br/>
        <div>
          <cite>2018-12-18</cite> <i class="icon-tag"></i>  <a href="tags#换电池-ref">换电池</a>
       </div> 
        <div style="clear: both;"></div>
        <hr/>
 
        
        <h11><a class="title" href="/posts/%E4%B8%89%E7%B3%BB%E7%BB%9F">三系统</a></h11>
        <div class="post_at_index">
            <h1 id="关闭time-machine快照">关闭time machine快照</h1>

<p>清除 time machine的本地快照</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>tmutil disable <span class="c"># 关闭自动备份</span>
tmutil thinlocalsnapshots / 9999999999999999

tmutil listlocalsnapshotdates / | <span class="nb">sed</span> <span class="s2">"1d"</span> | <span class="k">while </span><span class="nb">read </span>it<span class="p">;</span> <span class="k">do
    </span>tmutil deletelocalsnapshots <span class="s2">"</span><span class="nv">$it</span><span class="s2">"</span>
<span class="k">done
</span>tmutil listlocalsnapshots /
</code></pre></div></div>

<h1 id="磁盘划分">磁盘划分</h1>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>gpt <span class="nt">-r</span> show /dev/disk0           <span class="c"># gpt状态</span>
<span class="nb">sudo </span>fdisk /dev/disk0                 <span class="c"># 磁盘分区状况</span>

<span class="nb">sudo </span>diskutil apfs resizeContainer disk0s2000 95G JHFS+ window 0 <span class="c"># 划出windows分区</span>
<span class="nb">sudo </span>diskutil apfs resizeContainer disk0s2000 80G JHFS+ linux  0 <span class="c"># 划出linux分区</span>
</code></pre></div></div>

<h2 id="回收空间">回收空间</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>diskutil eraseVolume FREE L disk0s3000 <span class="c"># 将空间转化为未分配空间</span>
diskutil apfs resizeContainer disk1 0  <span class="c"># 扩展container disk1的空间</span>
</code></pre></div></div>

<h2 id="apfs-container的uuid变成f问题">apfs container的UUID变成F问题</h2>

<p>diskutil list disk0 显示磁盘的TYPE和NAME 是一行FFFFFFF-FFFFF。。。。</p>

<p>主要是因为上面回收空间时产生的，解决办法：</p>

<ol>
  <li>sudo gpt -r show /dev/disk0 记录下该分区的扇区开始数和个数
    <ol>
      <li>运行结果conten列就是UUID，FFFFFFF。。。为对应的故障分区</li>
      <li>该行start列为分区开始扇区数</li>
      <li>该行size列为分区扇区个数</li>
    </ol>
  </li>
  <li>恢复模式/Time Machine/U盘安装盘重启，进入命令行
    <ol>
      <li>gpt -r show /dev/disk0 记录下apfs container的扇区起止数，比如409640 195312496</li>
      <li>diskutil umountDisk disk0  # 卸载故障磁盘</li>
      <li>gpt remove -i 2 disk0      # 去除故障分区，2表示disk0(gpt型)第2个分区</li>
      <li>diskutil umountDisk disk0  # 确保卸载</li>
      <li>gpt add -i 2 -b begin -s size -t 7C3457EF-0000-11AA-AA11-00306543ECAC disk0
        <ol>
          <li>i后面的2 表示故障分区是disk0的第二个分区</li>
          <li>begin和size后面的数字是之前记录的 故障分区扇区开始数和个数</li>
          <li>7C3457EF-0000-11AA-AA11-00306543ECAC 是APFS的UUID，是固定的</li>
        </ol>
      </li>
    </ol>
  </li>
  <li>查看修改结果</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>diskutil list disk0
diskutil verifyDisk disk0       
diskutil verifyVolume disk0s2
</code></pre></div></div>

<h1 id="安装windows">安装windows</h1>

<ol>
  <li>使用bootcamp
    <ol>
      <li>在操作栏选择下载windows软件</li>
      <li>安装PE</li>
    </ol>
  </li>
  <li>用PE启动，安装 windows10 选好 EFI和安装分区</li>
</ol>

<p>这种安装方法，不会更改磁盘类型到MBR混合模式，还是以前的保护模式</p>

<h1 id="安装ubuntu">安装Ubuntu</h1>

<ol>
  <li>先确保安装好了 mac + windows 双系统</li>
  <li>安装refind</li>
  <li>安装ubuntu，
    <ol>
      <li>使用Etcher或unetbootin来制作USB安装盘，自己搞老是遇到文件系统。。。</li>
      <li>选择对应分区挂载点/ 不需格式化，</li>
      <li>device for boot loader installation的选项改为该分区</li>
    </ol>
  </li>
  <li>完成后回到Mac ，把EFI下的refind文件夹重命名为boot？？？</li>
</ol>

<h1 id="其他">其他</h1>

<p>Ubuntu下 sudo efibootmgr显示启动列表</p>

<h2 id="删除refind">删除refind</h2>
<p>在macOS中 进入EFI分区删除refind文件夹，sudo bless –setBoot –mount /</p>
 
        
        </div>
        <br/>
        <div>
          <cite>2018-06-24</cite> <i class="icon-tag"></i>  
       </div> 
        <div style="clear: both;"></div>
        <hr/>
 
        
        <h11><a class="title" href="/posts/%E7%A3%81%E7%9B%98">磁盘</a></h11>
        <div class="post_at_index">
            <p>关于磁盘的几个概念</p>

 
        <a href="/posts/%E7%A3%81%E7%9B%98" rel="nofollow">阅读全文...</a>
        </div>
        <br/>
        <div>
          <cite>2018-06-14</cite> <i class="icon-tag"></i>  <a href="tags#MBR-ref">MBR</a>, <a href="tags#GPT-ref">GPT</a>
       </div> 
        <div style="clear: both;"></div>
        <hr/>
 
        
        <h11><a class="title" href="/posts/rsync">rsync</a></h11>
        <div class="post_at_index">
            <p>rsync 远程或本地复制工具，可以看做是cp的替代。
翻译自 
 
        <a href="/posts/rsync" rel="nofollow">阅读全文...</a>
        </div>
        <br/>
        <div>
          <cite>2018-05-12</cite> <i class="icon-tag"></i>  <a href="tags#rsync-ref">rsync</a>
       </div> 
        <div style="clear: both;"></div>
        <hr/>
 
        
        <h11><a class="title" href="/posts/Vultr">Vultr</a></h11>
        <div class="post_at_index">
            <p>https://my.vultr.com/</p>

 
        <a href="/posts/Vultr" rel="nofollow">阅读全文...</a>
        </div>
        <br/>
        <div>
          <cite>2018-04-21</cite> <i class="icon-tag"></i>  <a href="tags#翻墙-ref">翻墙</a>
       </div> 
        <div style="clear: both;"></div>
        <hr/>
 
        
        <h11><a class="title" href="/posts/lintcode%E8%A7%A3%E9%A2%98%E6%80%BB%E7%BB%93">lintcode解题总结</a></h11>
        <div class="post_at_index">
            <p>基本做完leetcode的题目（还剩3道，感觉题目很无厘头），其中有很多不会做参考别人的，做完很值得记下来的。一并总结</p>

 
        <a href="/posts/lintcode%E8%A7%A3%E9%A2%98%E6%80%BB%E7%BB%93" rel="nofollow">阅读全文...</a>
        </div>
        <br/>
        <div>
          <cite>2016-07-15</cite> <i class="icon-tag"></i>  <a href="tags#lintcode-ref">lintcode</a>
       </div> 
        <div style="clear: both;"></div>
        <hr/>
 
        
        <h11><a class="title" href="/posts/shell%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95">shell常用用法</a></h11>
        <div class="post_at_index">
            <p>不是系统介绍，只列举几个常用的</p>

 
        <a href="/posts/shell%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95" rel="nofollow">阅读全文...</a>
        </div>
        <br/>
        <div>
          <cite>2016-05-13</cite> <i class="icon-tag"></i>  <a href="tags#shell-ref">shell</a>
       </div> 
        <div style="clear: both;"></div>
        <hr/>
 
        
        <h11><a class="title" href="/posts/%E4%BD%BF%E7%94%A8googleDrive%E5%A4%87%E4%BB%BD%E9%85%8D%E7%BD%AE">使用googleDrive备份配置</a></h11>
        <div class="post_at_index">
            <p>使用谷歌硬盘备份某些文件<br />
首先要按照<a href="https://developers.google.com/api-client-library/python/samples/samples#running-samples">这里</a> 创建应用访问的权限和token<br />
附属文件还有一个json</p>

 
        <a href="/posts/%E4%BD%BF%E7%94%A8googleDrive%E5%A4%87%E4%BB%BD%E9%85%8D%E7%BD%AE" rel="nofollow">阅读全文...</a>
        </div>
        <br/>
        <div>
          <cite>2016-05-09</cite> <i class="icon-tag"></i>  <a href="tags#备份-ref">备份</a>
       </div> 
        <div style="clear: both;"></div>
        <hr/>
 
        
        <h11><a class="title" href="/posts/awk-sed-grep%E7%AE%80%E4%BB%8B">awk-sed-grep简介</a></h11>
        <div class="post_at_index">
            <p>about AWK - sed - grep</p>

 
        <a href="/posts/awk-sed-grep%E7%AE%80%E4%BB%8B" rel="nofollow">阅读全文...</a>
        </div>
        <br/>
        <div>
          <cite>2016-03-04</cite> <i class="icon-tag"></i>  <a href="tags#awk-ref">awk</a>, <a href="tags#sed-ref">sed</a>, <a href="tags#grep-ref">grep</a>
       </div> 
        <div style="clear: both;"></div>
        <hr/>
 
        
        <h11><a class="title" href="/posts/java%E6%80%BB%E7%BB%93">java总结</a></h11>
        <div class="post_at_index">
            <p>总结java</p>

 
        <a href="/posts/java%E6%80%BB%E7%BB%93" rel="nofollow">阅读全文...</a>
        </div>
        <br/>
        <div>
          <cite>2016-03-02</cite> <i class="icon-tag"></i>  <a href="tags#java-ref">java</a>
       </div> 
        <div style="clear: both;"></div>
        <hr/>
 
</div>


<!-- Pagination links -->
<nav aria-label="Page navigation">
    <ul class="pagination">
    
        <li class="disabled">
            <a>&laquo;</a>
        </li>
    
  
    
        <li class="active">
            <a>1</a>
        </li>
    
      
    
        
            <li>
                <a href="/page2">2</a>
            </li>
        
    
        
            <li>
                <a href="/page3">3</a>
            </li>
        
    
        
            <li>
                <a href="/page4">4</a>
            </li>
        
    
        
            <li>
                <a href="/page5">5</a>
            </li>
        
    
  
    
        <li>
            <a href="/page2">&raquo;</a>
        </li>
    
    </ul>
</nav>

      </div>
      <hr/>
      <center> <footer>
        &copy; 2019 yacc3 with help from <a href="http://jekyllrb.com" target="_blank" title="The simple, blog-aware, static site generator.">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" title="GitHub Pages">GitHub</a>.
        <br><br>
      </footer> </center>


    </div>


  </body>
</html>

