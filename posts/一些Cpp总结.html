

<!DOCTYPE html  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
  <head>
    <meta charset="utf-8">
    <title>一些Cpp总结</title>
    
    <meta name="author" content="yacc3">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/css/syntax.css" rel="stylesheet" type="text/css" media="all">
    <link href="/css/bootstrap.2.2.2.min.css" rel="stylesheet" type="text/css" media="all">
    <link href="/css/style.css" rel="stylesheet" type="text/css" media="all">
    
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="/js/jquery.tocLight.js"></script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {inlineMath: [ ['$[',']$'] ]}
    });
  </script>
    <link href="" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">yacc3</a>
          <ul class="nav">
            <li><a href="/explore.html">Explore</a></li>
            <li><a href="/categories.html">Category</a></li>
            <li><a href="/tags.html">Tag</a></li>
            <li><a href="/archive.html">Archive</a></li>
            <li><a href="/about.html">About</a></li>

<!--             <li><a href="https://github.com/yaccai">Github</a></li> -->
          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="content">
        

<div class="page-header">
  <h11>一些Cpp总结 </h11>
</div>

<div class="row-fluid post-full">
  <div class="span12">


    <div class="date">
        <span>2015-06-21 </span>
    </div>
    <div class="content">
        <div id="toc-container">
  <table class="toc" id="toc">
    <tbody>
      <tr>
        <td>
          <div id="toctitle">
            <h2>Contents</h2>
          </div>
          <ul>
            <li class="toc_level-1 toc_section-1">
              <a href="#tocAnchor-1-1"><span class="tocnumber">1</span> <span class="toctext">命令</span></a>
            </li>
            <li class="toc_level-1 toc_section-2">
              <a href="#tocAnchor-1-2"><span class="tocnumber">2</span> <span class="toctext">虚函数</span></a>
            </li>
            <li class="toc_level-1 toc_section-3">
              <a href="#tocAnchor-1-3"><span class="tocnumber">3</span> <span class="toctext">智能指针</span></a>
            </li>
            <li class="toc_level-1 toc_section-4">
              <a href="#tocAnchor-1-4"><span class="tocnumber">4</span> <span class="toctext">lamda</span></a>
            </li>
            <li class="toc_level-1 toc_section-5">
              <a href="#tocAnchor-1-5"><span class="tocnumber">5</span> <span class="toctext">更多c++11</span></a>
            </li>
            <li class="toc_level-1 toc_section-6">
              <a href="#tocAnchor-1-6"><span class="tocnumber">6</span> <span class="toctext">vim</span></a>
            </li>
            <li class="toc_level-1 toc_section-7">
              <a href="#tocAnchor-1-7"><span class="tocnumber">7</span> <span class="toctext">c++11 thread</span></a>
            </li>
            <li class="toc_level-1 toc_section-8">
              <a href="#tocAnchor-1-8"><span class="tocnumber">8</span> <span class="toctext">可变参数</span></a>
            </li>
            <li class="toc_level-1 toc_section-9">
              <a href="#tocAnchor-1-9"><span class="tocnumber">9</span> <span class="toctext">other</span></a>
            </li>
            <li class="toc_level-1 toc_section-10">
              <a href="#tocAnchor-1-10"><span class="tocnumber">10</span> <span class="toctext">C++语法</span></a>
            </li>
            <li class="toc_level-1 toc_section-11">
              <a href="#tocAnchor-1-11"><span class="tocnumber">11</span> <span class="toctext">other</span></a>
            </li>
            <li class="toc_level-1 toc_section-12">
              <a href="#tocAnchor-1-12"><span class="tocnumber">12</span> <span class="toctext">闭包</span></a>
            </li>
            <li class="toc_level-1 toc_section-13">
              <a href="#tocAnchor-1-13"><span class="tocnumber">13</span> <span class="toctext">位操作</span></a>
            </li>
            <li class="toc_level-1 toc_section-14">
              <a href="#tocAnchor-1-14"><span class="tocnumber">14</span> <span class="toctext">溢出的检查</span></a>
            </li>
            <li class="toc_level-1 toc_section-15">
              <a href="#tocAnchor-1-15"><span class="tocnumber">15</span> <span class="toctext">二叉树</span></a>
            </li>
          </ul>
        </td>
      </tr>
    </tbody>
  </table>
</div><h1 id="tocAnchor-1-1">命令</h1>
<p>和gcc系列类似，eg: clang++ -Wall -g -std=c++11 -stdlib=libc++ t1.cpp -o t1 
或者简单的参数都省</p>

<ul>
  <li>mac中的动态链接库是以dylib作为后缀的</li>
  <li>std指编译的标准，详见c++标准化协会xxx</li>
  <li>std=gnu++11 c++11 以及14</li>
</ul>

<h1 id="tocAnchor-1-2">虚函数</h1>
<p>vitual关键字是可选的，这使得阅读代码变得很费劲。实际上，参数列表的不同(即使是可以隐式转换的情况)，以及是否const类型，都会导致重载而不是重写。</p>

<div class="highlighter-rouge">
  <div class="highlight">
    <pre class="highlight">
      <code>virtual void (short) {}
virtual void const (short){}

virtual void (int){}
virtual void (short){}
</code>
    </pre>
  </div>
</div>

<p>c++11, 提出了override和final标识，和const位置一样，表明这个名字的方法是用于重写，或以后再不重写了。</p>

<h1 id="tocAnchor-1-3">智能指针</h1>
<p>unique_ptr: 不需要共享时，可以使用move转给另一个unique_ptr<br />
shared_ptr:  如果内存资源需要共享<br />
weak_ptr: 持有被shared_ptr对象的引用，但不改变引用计数</p>

<div class="highlighter-rouge">
  <div class="highlight">
    <pre class="highlight">
      <code>void foo(int* p) {
    std::cout &lt;&lt; *p &lt;&lt; std::endl;
}
std::unique_ptr&lt;int&gt; p1(new int(42));
std::unique_ptr&lt;int&gt; p2 = std::move(p1); 
// transfer ownership
if(p1) foo(p1.get());
 
(*p2)++;
 
if(p2) foo(p2.get());
</code>
    </pre>
  </div>
</div>

<h1 id="tocAnchor-1-4">lamda</h1>

<div class="highlighter-rouge">
  <div class="highlight">
    <pre class="highlight">
      <code>std::function&lt;int(int)&gt; lfib = [&amp;lfib](int n){ 
    return n &lt; 2 ? 1 : lfib(n-1) + lfib(n-2);
};
</code>
    </pre>
  </div>
</div>

<h1 id="tocAnchor-1-5">
  <a href="http://blog.jobbole.com/44015/">更多c++11</a>
</h1>

<h1 id="tocAnchor-1-6">vim</h1>
<ul>
  <li>确保~/.vim/{doc,plugin,syntax}存在</li>
  <li>使用(Vundle)[https://github.com/VundleVim/Vundle.vim]管理插件</li>
  <li>在~/.vimrc写   Bundle ‘pluginname’ 打开vm执行:PluginInstall 就会安装</li>
  <li>推荐配置网上有很多</li>
</ul>

<h1 id="tocAnchor-1-7">c++11 thread</h1>

<ul>
  <li><a href="http://blog.jobbole.com/44409/">1</a>  <a href="https://www.ibm.com/developerworks/cn/linux/1412_zhupx_thread/">2</a></li>
  <li>main退出后，所衍生的线程都会立刻停止，join相当于加入等待。detach分离执行，而且thread对象不再有效，std::ref 用于包装按引用传递的值，自己重复加锁会导致自己阻塞自己，需要使用递归锁，但是递归锁不能层数过深，否则会出现错误。</li>
  <li>区域锁在构造对象时，试图加锁。析构时释放，即使是调用函数发生了异常，在清理栈帧的时候也会调用它的析构函数得到解锁。Lock_guard和Unique_lock:除了lock_guard的功能还可以手动管理，以及其他的方法。</li>
  <li>线程本地存储 (TLS) 变量，变量前面声明 thread_local在线程创建之后才生效，在线程退出的时候销毁, 不同系统的线程栈的大小是不同的。TLS 变量一般不能跨线程，其初始化在调用线程第一次使用这个变量时进行，默认初始化为 0。</li>
  <li>线程间事件，condition_variable 提供wait notify等方法</li>
  <li>promise/future, packaged_task, async</li>
</ul>

<h1 id="tocAnchor-1-8">可变参数</h1>
<ol>
  <li>首先定义va_list型的变量, 如arg_ptr</li>
  <li>然后用va_start宏初始化arg_ptr, 这个宏的第二个参数是参数列表中的第一个, 是一个固定的参数.</li>
  <li>然后用va_arg返回可变的参数, va_arg的第二个参数是要返回的参数的类型</li>
  <li>
    <p>最后用va_end宏结束可变参数的获取.然后就可以在函数里使用第二个参数了.如果函数有多个可变参数的,依次调用va_arg获取各个参数.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> void simple_va_fun(int i, ...)  { 
 　　  va_list arg_ptr; 
 　　  int j=0; 
 　  　va_start(arg_ptr, i); 
 　  　j=va_arg(arg_ptr, int); 
 　  　va_end(arg_ptr); 
	    
 　  　printf("%d %d\n", i, j); 
 　  　return; 
 }
</code></pre></div>    </div>
  </li>
</ol>

<h1 id="tocAnchor-1-9">other</h1>
<ul>
  <li>进程间通信主要包括管道, 系统IPC(包括消息队列,信号量,共享存储), SOCKET.</li>
  <li>进程/线程间同步机制,临界区（Critical Section）、互斥量（Mutex）、信号量（Semaphore）、事件（Event）。临界区的概念可以用mutex实现。</li>
</ul>

<h1 id="tocAnchor-1-10">C++语法</h1>

<p>如果继承的多个类中，含有相同的虚函数，则会编译错误<br />
clang 的报错信息：member ‘func’ found in multiple base classes of different types<br />
相同是指：函数名字相同即可，与参数列表 是否const，返回值等无关</p>

<h1 id="tocAnchor-1-11">other</h1>
<p>
  <a href="http://www.viva64.com/en/l/">64位编程需要注意</a>
</p>

<h1 id="tocAnchor-1-12">闭包</h1>

<ul>
  <li>几个<a href="http://coolshell.cn/articles/8309.html">例子</a></li>
  <li><a href="https://zh.wikipedia.org/wiki/%E9%97%AD%E5%8C%85_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)">wiki</a></li>
  <li><a href="http://www.cprogramming.com/c++11/c++11-lambda-closures.html">cprogramming</a></li>
</ul>

<h1 id="tocAnchor-1-13">
  <a href="http://aggregate.ee.engr.uky.edu/MAGIC/">位操作</a>
</h1>

<h1 id="tocAnchor-1-14">
  <a href="http://coolshell.cn/articles/11466.html">溢出的检查</a>
</h1>

<h1 id="tocAnchor-1-15">二叉树</h1>
<p>二叉树的高度， null为0， 单个节点为1， 其他的形式，是leaf到root的最长路径上的点数。如果一个点只有一个分支，这个点的高度，从非空分支算</p>

    </div>

    <hr>

  
    <ul class="tag_box inline">
      <li><i class="icon-folder-open"></i></li>
      
      


  
     
    	<li><a href="/categories#CSE-ref">
    		CSE <span>15</span>
    	</a></li>
    
  


    </ul>
    

  
    <ul class="tag_box inline">
      <li><i class="icon-tags"></i></li>
      
      


  
     
    	<li><a href="/tags#c++-ref">c++ <span>2</span> </a></li>
    
  



    </ul>
    


    <nav aria-label="Page navigation">
      
      <ul class="pagination">
      
        <li class="prev"><a href="/posts/MacTips" title="MacTips">前一篇</a></li>
      

        <li><a href="">目录</a></li>
        
      
        <li class="next"><a href="/posts/%E4%B8%80%E7%82%B9%E6%9C%89%E5%85%B3%E6%B7%B1%E5%BA%A6%E6%90%9C%E7%B4%A2%E7%9A%84%E6%80%BB%E7%BB%93" title="一点有关深度搜索的总结">后一篇</a></li>
      
      </ul>
    </nav>


<script type="text/javascript">
    $(document).ready(
        function expand() {
            var node = $("h1")
            for (var i = 0; i < node.length; i++) {
                var t = node[i]
                  var num = $("[href='#" + t.id + "']").children("span.tocnumber")
                  t.innerText = num.text() + "    " + t.innerText
            }

            node = $("h2")
            for (var i = 0; i < node.length; i++) {
                  var t = node[i]
                  var num = $("[href='#" + t.id + "']").children("span.tocnumber")
                  t.innerText = num.text() + "   " + t.innerText
            }

            
        }
    );
</script>
    
  </div>
</div>

      </div>
      <hr/>
      <center> <footer>
        &copy; 2019 yacc3 with help from <a href="http://jekyllrb.com" target="_blank" title="The simple, blog-aware, static site generator.">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" title="GitHub Pages">GitHub</a>.
        <br><br>
      </footer> </center>


    </div>


  </body>
</html>

